# 工作总结

2025年度工作围绕**战斗系统**展开，主要涉及以下几个核心方向：

- **战斗系统开发与优化**：深入参与战斗模块的代码开发，包括技能系统、消耗计算、事件机制等核心功能的重构与优化
- **新门派（弥勒山）技能制作**：完成新门派全套技能的客户端实现，涵盖法术资源、特效播放、技能逻辑等完整流程
- **工具与编辑器应用**：熟练掌握阵法技编辑器、ETS编辑器、剧情编辑器等开发工具
- **资料片与版本迭代**：支持moba3.0，封神AI、山河画境第五赛季等重要版本的开发工作
- **技术债务处理**：对多个模块的旧代码进行重构，提升代码可维护性

# 工作结果

## 新门派（弥勒山）技能全流程制作

**工作内容：** 负责弥勒山门派一半战斗技能的客户端实现，涵盖法术资源接入、特效播放、技能逻辑，音效音乐等完整链路。

**实现方案：**
- 掌握法术文件格式（MCF/MPF）及各字段在代码中的应用
- 理解角色模型Des在法术播放中的挂载机制
- 熟练运用Unit/Node/Action新式技能体系实现复杂技能逻辑
- 将战斗外一些门派内容，比如法宝，神器的资源配置总结为文档供后人使用

**问题与解决：**

| 遇到问题            | 解决方案                       |
| --------------- | -------------------------- |
| 召唤兽受击特效无法正常显示   | 排查后发现挂件配置缺失，补充配置后解决        |
| 法术播放和buff无法完美衔接 | 逐帧调节buff的初始帧数并写到导表中，确保完美衔接 |
| 实机接入时资源表现异常     | 与美术同事协作，调整Key点和缩放参数        |

---

## 技能消耗计算客户端迁移

**工作内容：** 将战斗中技能消耗计算逻辑从服务端迁移至客户端，降低服务端计算压力，提升战斗响应速度。

**实现策略：**
1. 搭建客户端消耗计算框架，确保与服务端逻辑一一对应
2. 组合式的代码结构，可以方便的支持对新增技能的处理
3. 分批次外放：第一批HP类技能（10月）→ 第二批扩展类型（12月）
4. 通过huodong_sd变量实现功能开关，支持问题快速回滚

**问题与解决：**

| 遇到问题             | 解决方案                 |
| ---------------- | -------------------- |
| 客户端计算结果与服务端偶发不一致 | 增加关键路径日志对比，逐一排查公式差异点 |
| 底层改动导致跟测问题较多     | 采用灰度外放策略，配合功能开关降低风险  |

---

## 技能描述系统重构

**工作内容：** 重构技能描述模块，将魔耗计算、警告信息等逻辑移至服务端，并统一HT/PC端代码。

**重构成效：**
- 原HT/PC两套独立代码 → 统一为一份可维护代码
- 召唤兽技能描述同步进行类似处理
- 获取技能列表函数重构，将内部上下文改为参数传入，提升可测试性。原来的函数依赖很多内部状态，导致其他地方很难调用

---

## 编辑器工具扩展与应用

**工作内容：** 深入学习并扩展阵法技编辑器、ETS编辑器、剧情编辑器，支持封神AI等复杂玩法制作。

| 编辑器    | 应用场景      | 扩展内容             |
| ------ | --------- | ---------------- |
| 阵法技编辑器 | 场景无缝切换到战斗 | 新增Hook机制支持程序接管逻辑 |
| 剧情编辑器  | 封神AI剧情制作  | 扩展协议，增加队友锦衣字段容量  |
| ETS编辑器 | 战斗技能灵活配置  | 熟练应用于新门派技能制作     |

---
## 问题与反思

### 技术层面

| 问题描述         | 原因分析                        | 解决方案                     | 效果             |
| ------------ | --------------------------- | ------------------------ | -------------- |
| **MOBA导表返工** | 未提前确认技术栈，使用旧式py导出后发现需用Jinja | 接手新任务前先确认规范要求，阅读最新文档     | 后续导表任务无类似问题    |
| **旧代码修改遗漏**  | 部分调用点通过动态拼接规避全局搜索           | 结合IDE引用查找 + 运行时日志验证覆盖完整性 | 勋章系统改造10+协议无遗漏 |
| **战斗事件系统复杂** | 事件分帧触发、调用链长，纯看代码难以理清        | 从单个技能入手梳理全流程             | 已能独立完成新门派技能制作  |
### 协作层面

| 问题描述         | 原因分析                  | 解决方案                    | 效果           |
| ------------ | --------------------- | ----------------------- | ------------ |
| **资源处理耗时**   | GUI同事对应用场景不熟悉，参数设置不准确 | 主动提供参数说明文档，关键资源提前沟通验收标准 | 后续批量资源处理效率提升 |
| **MOBA工期紧张** | 导表迭代时间超预期，策划中途增加需求    | 与QA，服务端保持高频沟通，联调阶段前置    | 按期交付         |

去年的目标基本全部达成，抢单由于全年工单密集未能开始。在学习梦幻新模块以及开发可供大家复用的公共模块上都有所建树。

# 学习与成长

| 能力维度      | 年初水平     | 年末水平                       |
| --------- | -------- | -------------------------- |
| **战斗系统**  | 仅了解基础流程  | 可独立完成新门派技能全流程制作            |
| **编辑器工具** | 未接触      | 熟练使用并能进行功能扩展               |
| **代码架构**  | 被动维护     | 主动重构，统一战斗信息相关的HT/PC代码      |
| **风险控制**  | 依赖跟测发现问题 | 功能开关+灰度外放+日志对比+构建虚假数据的测试用例 |
| **ai工具**  | 未接触      | 开发了一个用来查询常用QA指令的mcp小工具     |

---

# 2026年工作规划

1. **技能消耗迁移收尾** - 完成剩余普通技能的客户端计算迁移
2. **数据绑定深度应用** - 在新需求中积极使用数据绑定模式，简化UI逻辑代码
3. **单元测试覆盖** - 对高风险底层模块增加测试用例，减少跟测阶段问题
4. **AI应用** - 在整个开发的工具链中更加积极的使用AI工具
