---
tags:
  - reference
design_pattern: Memento
category: 行为型模式
---
> [!summary] 意图
> 在不破坏封装性的前提下，捕获一个对象内部状态，并在该对象之外保存这个状态。

> [!summary] 适用性
> 在以下情况下可以使用：
> - 必须保存一个对象在某时刻的状态，这样以后需要时可以恢复到这个状态。
> - 如果直接用接口得到这些状态，会破坏对象的封装性。

> [!summary] 结构图
> ![[备忘录模式 2023-11-24 18.30.10.excalidraw]]
> 1. `CareTaker`向`Originator`发起请求创建备忘录，保留一段时间后将其返还给`Originator`。
> 2. `Memento`是被动的，全程仅被`Originator`使用。

> [!summary] 效果
> 1. 保持封装边界，把可能很复杂的`Originator`内部信息封闭起来。
> 2. 简化了`Originator`的实现逻辑。
> 3. `Memento`可能会很大，持有它可能会产生大量的存储开销。

> [!tips] 实现细节
> 如果`Memento`的创建和返回的顺序是可预测的，那么可以采用增量式的`Memento`来存储状态。

> [!note] 相关模式
> - [[读书笔记/设计模式/命令模式|命令模式]]可以用此模式来实现**撤销/重做**功能。
> - 可以用于[[迭代器模式]]来保存迭代状态。
