---
tags:
  - reference
design_pattern: Command
category: 行为型模式
---
> [!summary] 意图
> 将一个请求封装为一个对象，从而使你可以用不同的请求对客户进行参数化；对请求排队或记录日志，以及支持可撤销的操作。

> [!summary] 适用性
> 在以下情况下可以使用：
> - 需要抽象化执行的动作来参数化某对象。
> - 在不同的时刻指定，排列和执行请求。
> - 支持取消操作。

> [!summary] 结构图
> ![[命令模式 2023-11-21 14.56.20.excalidraw]]
> 时序：
> ![[命令模式 2023-11-21 15.03.50.excalidraw]]

> [!summary] 效果
> 1. 将调用操作的对象和知道如何实现的对象解耦。
> 2. 更易扩展，新增命令无需改变已有的类。

> [!tips] 实现细节
> 1. 是否需要支持取消和重做，这可能需要保存额外信息
> 2. 避免取消过程中的错误积累。

> [!note] 相关模式
> - 可以用[[组合模式]]来实现宏命令[^1]。
> - [[备忘录模式]]可以用来持有某个状态，命令模式根据状态来取消效果。

[^1]: 宏命令就是一系列命令组织到一起实现一个新功能的命令。
