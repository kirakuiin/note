---
tags:
  - reference
design_pattern: Interpreter
category: 行为型模式
---
> [!summary] 意图
> 给定一个语言，定义它文法的一种表示，并定义一个解释器，这个解释器用来解释语言中的句子。

> [!summary] 适用性
> 在以下情况下可以使用：
> - 当一个语言需要解释执行，并且你可以将该语言中的句子表示为抽象语法树时，可使用解释器模式。

> [!summary] 结构图
> ![[解释器模式 2023-11-22 15.21.03.excalidraw]]
> 1. `Client`构建一个句子，它是由`TerminalExpression`和`NonTerminalExpression`构成的一个抽象语法树，然后初始化`Context`并调用解释操作。
> 2. 每个`NonTerminalExpression`调用子表达式的解析操作。
> 3. 每个`TerminamExpression`是递归的基础情况，不会再继续向下解释。

> [!summary] 效果
> 1. 易于改变和扩展文法
> 2. 文法易于实现
> 3. 如果文法较为复杂则难以维护

> [!tips] 实现细节
> 1. 如何创建抽象语法树
> 2. 解释操作如何定义，是在类内定义还是用[[访问者模式]]来为所有类统一实现解释功能。
> 3. `TerminalExpression`可以用[[读书笔记/设计模式/享元模式|享元模式]]来表达。

> [!note] 相关模式
> - 抽象语法树是一个[[组合模式]]的实例。
> - [[读书笔记/设计模式/享元模式|享元模式]]可以用来共享`TerminalExpression`。
> - [[迭代器模式]]可以用来遍历语法树结构。
> - [[访问者模式]]可以在一个类中维护抽象语法树各个结点的行为。
