---
tags:
  - reference
aliases:
  - Separate Domain from Presentation
refactor_type: 大型重构
---
> [!summary] 概要
> 某些GUI类之中包含了领域逻辑。将领域逻辑分离出来，为它们建立独立的领域类。

> [!summary] 动机
> 将逻辑分离可以让未来代码的修改变得容易，同时也让同一业务可以用多种形式表达。最典型的就是[[MVC模式]]。

> [!summary] 做法
> 1. 为每个窗口新建一个领域类。
> 2. 如果窗口内有一张表格，新建一个类表示其中的行，再以窗口所对应之领域类中的某一个集合来容纳所有的行领域对象。
> 3. 检查窗口中的数据。如果数据只用于UI，就把它留着；如果数据被领域逻辑使用，并且不显示于窗口上，我们就以[[搬移字段|Move Field]]将其移动到领域类中；如果数据同时被UI和领域使用，就对它使用[[复制被监视数据|Duplicate Observed Data]]。
> 4. 检查UI类中的逻辑。实施[[提炼函数|Extract Method]]将展现逻辑从领域逻辑中分开。一旦隔离了领域逻辑，在运用[[搬移函数|Move Method]]将其移动到领域类。
> 5. 以上步骤完成后，你就拥有了两组彼此分离的类；展现类用来处理UI，领域类处理业务逻辑。

> [!example] 范例
![[将领域和表述显示分离 2024-01-25 22.47.39.excalidraw]]