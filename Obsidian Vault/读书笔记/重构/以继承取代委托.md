---
tags:
  - reference
aliases:
  - Replace Delegation with Inheritance
refactor_type: 处理概括关系
---
> [!summary] 概要
> 你在两个类之间使用委托关系，并且经常为整个接口编写许多极其简单的委托函数。那么考虑让委托类直接继承受托类。

> [!summary] 动机
> 如果你发现你需要使用受托类中的所有函数，此重构可以让你轻松回头，使用继承。

> [!warning]
> 以下两种情况不要采用此重构方案：
> - 你并没有使用受托类的所有函数，委托类“**不是**”一个受托类。
> - 受托对象被多个对象共享，并且它是可变的。

> [!summary] 做法
> 1. 让委托类称为受托类的子类。
> 2. 将委托类里的受托类字段设为本身。
> 3. 去掉简单的委托函数。
> 4. 测试。
> 5. 将所有其他涉及到委托关系的代码，改为调用对象自身。
> 6. 移除受托字段。

> [!example] 范例
> ![[以继承取代委托 2024-01-09 18.49.10.excalidraw]]

> [!hint]
> 和[[以委托取代继承|Replace Inheritance with Delegation]]正好相反。