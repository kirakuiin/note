---
tags:
  - reference
aliases:
  - Move Method
refactor_type: 在对象之间搬移特性
---
> [!summary] 概要
> 你的程序里，有个函数与其所驻类之外的另一个类进行了更多的交流。调用后者，或者被后者调用。
> 此时应该在另一个类建立一个有着类似行为的新函数，将旧函数变为一个委托函数，或移除。

> [!summary] 动机
> 如果一个类有太多行为，或者两个类之间有太多合作而形成了高度耦合，此时应该搬运函数。

> [!summary] 做法
> 1. 检查原类中被原函数使用的一切特性，考虑它们是否也该一同迁移。
> 2. 检查子类和超类，看看是否有其他声明（这可能会导致放弃迁移）。
> 3. 在目标类中声明这个函数，取一个合适的名字。
> 4. 将原函数代码复制的目标函数中，进行调整使之适应新类。
> 5. 决定原类如何引用目标类。
> 6. 修改原函数，使之成为一个调用目标类的委托函数。
> 7. 测试。
> 8. 如果决定要删除原函数，则在所有引用原函数的地方替换为对目标函数的调用。

> [!example] 范例
> ![[搬移函数 2023-12-15 14.59.09.excalidraw]]

> [!ref] 相关概念
> - [[什么是面向对象#^single-responsibility-principle|单一职责]]