---
tags:
  - reference
aliases:
  - Replace Inheritance with Delegation
refactor_type: 处理概括关系
---
> [!summary] 概要
> 某个子类只使用超类接口的某一部分，或者根本不需要继承而来的数据。此时需要在子类中新增一个超类字段；调整子类函数改为委托超类；然后去掉继承关系。

> [!summary] 动机
> 继承有时并不是你所需要的，你继承之后的对象并不符合**is-a**的关系。这会导致代码意图混淆。因此你应该去除这种继承关系，改为委托。

> [!summary] 做法
> 1. 在子类中新建一个字段，使其引用超类的实例，并将其初始化为`this`。
> 2. 修改子类内的所有函数，让它们不再使用超类而是使用新建的委托字段来实现功能。
> 3. 去除两个类之间的继承关系，给委托字段赋值一个超类实例。
> 4. 针对客户端所用的每一个超类函数，在子类内新增一个简单的委托转发函数。
> 5. 测试。

> [!example] 范例
> ![[以委托取代继承 2023-12-28 14.46.58.excalidraw]]