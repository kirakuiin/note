---
tags:
  - reference
aliases:
  - Change Reference to Value
---
> [!summary] 概要
> 你有一个引用对象，很小且不可变，并不易管理。那么应将其变为一个值对象。

> [!summary] 动机
> 如果引用对象其实是不可变的，并且管理起来非常复杂。此时应将其变为值对象。不可变对象在并发和分布系统中特别有用，因为你无需考虑同步问题。

> [!summary] 做法
> 1. 检查重构目标是否为不可变对象，或是否可以改为不可变对象。
> 	- 如果目前不可变，考虑使用[[移除设值函数|Remove Setting Method]]。
> 	- 如果无法将其改为不可变对象，则放弃使用本项重构。
> 2. 实现不可变对象的一些方法，比如比较，哈希值等等。
> 3. 考虑是否可以删除工厂函数。

> [!example] 范例
> ![[将引用对象改为值用对象 2024-01-04 12.59.57.excalidraw]]

> [!hint] 不可变对象
> 不可变对象内部的数值一般是无法变化的，如果你想修改一个不可变对象，往往通过创建一个新对象来模拟修改这一操作。

> [!hint]
> 和[[将值对象改为引用对象|Change Value to Reference]]为对称重构方案。
