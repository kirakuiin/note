---
tags:
  - reference
special_tag: 3D  Math
---
由于在实时渲染中，对发光表面做合适的处理是无法负担的奢侈行为，因此场景里的光源都是抽象的实体，目前主要使用的有以下几种光源。

- 点光源：向所有方向发光，构成一个球体。点光源具有一个位置和颜色。一般还具有一个衰减半径，在计算机模拟中到达半径之后强度会衰减至0。
  ![[point_light.png]]
- 聚光灯：表明一个来自特定位置特定方向的光线，和一个可选的衰减距离，以及锥底的第衰减半径。这种光常常用于投影，比如灯头前放置一张图片，那么远处就会图片的投影。
  ![[spot_light_conical.png]]
- 定向光：代表从足够远处发出的光，以至于在照亮场景时，可以认为所有的光都是平行的。太阳，月亮，星星的光都是平行光。

# 光的衰减

光的辐射度随着距离而减弱，想象一个点光源，光子以固定的频率向这个球面扩张，所以光子数量和球的面积成反比，也就是：
$$
\frac{i_1}{i_2} = \left(\frac{d_2}{d_1}\right)^2
$$

但是要注意，感知到的光的亮度不会因为距离的变大而衰减，因为光的亮度用辐亮度来衡量，它是要乘以固体角的。无论距离如何变化，观察者的固体角不变，那么感知的亮度也不会改变。

![[光源 2024-07-13 20.03.35.excalidraw]]

然而在3D应用中，一般不会采用现实世界模型，而是采用基于衰落距离的，更加简单的模型。
$$
i(d) = \left\{
\begin{array}{ll}
1 & d \le d_{min} \\
\frac{d_{max}-d}{d_{max}-d_{min}} & d_{min} < d < d_{max} \\
0 & d>= d_{max}
\end{array}
\right .
$$

这个方程由两个参数开控制辐射度，一个最近距离，一个最远距离。它一般只应用于点光源和聚光灯，平行光的强度不会衰减。

> [!summary] 模型对比
> ![[light_attenuation_curves.png]]

# 光照的预计算

实时渲染中最不真实之处，就是渲染反射超过一次以上光线，这个问题非常困难，因为你要计算场景之中各个物体之间的可见性，如何反射等等，并且有任意一个物体变动位置，所有光照可能都会受到影响。

然而有些情况下物体是静止的，比如天花板之类。为了减少运行时的开销，可以使用**光照贴图**这种技术来存储预先计算好的光照信息，将其存到一个纹理之中，这可以大大降低运行时计算光照的开销。