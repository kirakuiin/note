---
tags:
  - reference
special_tag: 3D  Math
---
# 计数

所谓计数是指在不枚举所有选择而回答有多少个的理论。最基本的有两个规则，即：
- 和规则：在两个不相交的集合中选择一个元素的方法数等于这两个集合的[[基础知识#集合的数|基数和]]。
- 积规则：选出一个有序对的方法数等于选出第一个元素的方法数乘以选出第二个元素的方法数。

## 排列

有限集$S$中的一个全排列是$S$的一个有序序列，其中每个元素仅出现一次。假设基数为$n$，那么第一个元素有$n$个选择，第二个有$n-1$个，最后一个有$1$种选择，所以$S$的全排列有$n!$种。

有限集$S$上的$k$排列是其中$k$个元素的有序序列，且每个元素最多出现一次。同全排列唯一的区别的是，最后一个元素有$(n-k+1)$种选择，所以$k$排列的数目为：$\frac{n!}{(n-k)!}$

## 组合

有限集$S$的的$k$组合是指$S$的$k$子集，其中每个元素最多出现一次。组合的求法可以根据排列得到，对于由$k$个元素构成的子集，共有$k!$种可能排列。所以组合可以用$S$的$k$排列除以$k$子集的排列来表示，这相当于给排列去除了顺序的影响，变为子集：
$$
\frac{n!}{(n-k)!} \div k! = \frac{n!}{(n-k)!k!}
$$

## 二项系数

符号$\begin{pmatrix}n \\ k\end{pmatrix}$代表$n$集合中$k$组合的数目，因为对于每个$k$的情况$k \in \{0, 1, \cdots, n-1, n\}$，$\begin{pmatrix}n \\ k\end{pmatrix}$正好同$(x+y)^n$展开的每项系数一一对应，所以称之为*二项系数*。

# 概率

我们借助样本空间$S$来定义概率。样本空间是*基本事件*的[[基础知识#集合|集合]]。每个基本事件都视为某个事件的一个可能结果。

而事件是样本空间$S$的一个子集。$S$称为必然事件，$\emptyset$称为空事件。如果两个事件满足$A \cap B = \emptyset$，则它们是互斥的。我们将*基本事件*$s$视为事件$\{s\}$，由定义可以知道，所有的基本事件都是互斥的。

根据上述内容我们可以引申出概率的定义，样本空间$S$上的*概率分布*$Pr\{\}$是一个从$S$到实数的映射，它满足如下公理：
1. 对于任意事件$A$，$Pr\{A\} \ge 0$。
2. $Pr\left\{S\right\} = 1$。
3. 对于任意个互斥事件$A_1, A_2, \cdots$有$Pr\{\bigcup_\limits{i}A_i\} = \sum\limits_{i}Pr\{A_i\}$。

我们把$Pr\{A\}$称为事件$A$的**概率**。很多集合成立的公理在概率上也是成立的，最重要的就是：
$$
\begin{align}
Pr\{A\cup B\} &= Pr\{A\} + Pr\{B\} - Pr\{A \cap B\} \\
Pr\{\overline{A}\} &= 1 - Pr\{A\}
\end{align}
$$
## 离散概率分布

如果概率分布定义在有限或是无限可数的空间上，则概率分布是离散的。
如果$S$是有限的，并且每个基本事件$s \in S$满足$Pr\{s\} = 1/|S|$，则称之为$S$上的均匀概率分布。

## 连续概率分布

在连续概率分布中，不是所有样本空间的子集都被视作事件。连续均匀分布定义在区间$[a, b]$上，且$a < b$。其中只有部分子集$[c, d]$有概率，其概率为：
$$
Pr\{[c, d]\} = \frac{d-c}{b-a}
$$
并且对于任意一点$x = [x, x]$，其概率为0。所以：
$$
\begin{align}
Pr\{[c,d]\} &= Pr\{(c,d)\} + Pr\{[c, c]\} + Pr\{[d, d]\} \\
&= Pr\{(c,d)\}
\end{align}
$$

## 条件概率

有时我们知道了关于一些试验结果的*先验知识*[^1]。比如投掷两枚硬币，并告知你有至少有一枚硬币朝上，这个就属于先验知识。然后要求你在这个条件下求解两枚概率都朝上的概率。

先验知识会导致样本空间收缩，排除了两个硬币均为反面的情况。而剩下的三个事件概率都是相等的，所以概率为$\frac{1}{3}$。

我们把这种情况下的概率叫做*条件概率*，它形式化了关于试验结果部分先验知识的概念。已知事件$B$发生，求事件$A$发生的条件概率为：
$$
\Pr\{A|B\} = \frac{Pr\{A \cap B\}}{Pr\{B\}}
$$

公式中除以$Pr\{B\}$体现了样本空间的收缩。

如果两个事件$A, B$有$Pr\{A \cap B\} = Pr\{A\}Pr\{B\}$，则称这两个事件是*独立*的。此时$\Pr\{A|B\} = Pr\{A\}$，证明事件$B$的发生对$A$毫无影响。

如果对于所有$1 \le i < j \le n$，有：
$$
Pr\{A_i\cap A_j\} = Pr\{A_i\}Pr\{A_j\}
$$
则称事件$A_1, A_2, \cdots, A_n$*两两独立*。
如果这些事件的子集$A_{i_1}, A_{i_1}, \cdots, A_{i_k}$还满足：
$$
Pr\{A_{i_1}\cap A_{i_2}\cap\cdots\cap A_{i_k}\} = Pr\{A_{i_1}\}Pr\{A_{i_2}\}\cdots Pr\{A_{i_k}\}
$$
则称这些事件*相互独立*。

## 贝叶斯定理

根据条件概率的定义和集合的交换律，对于两个概率不为0的事件$A, B$，有：
$$
Pr\{A\cap B\} = Pr\{B\}Pr\{A|B\} = Pr\{A\}Pr\{B|A\}
$$
变形可得*贝叶斯定理*：
$$
Pr\{A|B\} = \frac{Pr\{A\}Pr\{B|A\}}{Pr\{B\}}
$$

如果将除数变换为$Pr\{B \cap A\} + Pr\{B \cap \overline{A}\}$，并将其按照第一个公式展开。可得：
$$
Pr\{A|B\} = \frac{Pr\{A\}Pr\{B|A\}}
{
Pr\{A\}Pr\{B|A\} + Pr\{\overline{A}\}Pr\{B|\overline{A}\}
}
$$

这个公式经常用于简化条件概率的计算，也可以用来计算*后验概率*[^2]。

# 离散随机变量

离散随机变量是一个从离散概率分布空间$S$到实数的函数，它将每个实验的结果与一个实数关联起来，这使得我们可以分析结果数集上的概率分布。

对于随机变量$X$和实数$x$，定义事件$X = x$为$\{s \in S: X(s) = x\}$，所以：
$$
Pr\{X = x\} = \sum_{s\in S: X(s) = x}Pr\{s\}
$$
函数$f(x) = Pr\{X = x\}$被称为随机变量$X$的概率密度函数。

假设随机变量为投掷一个D20骰子，骰子值的奇偶性，那么可得：$Pr\{X = odd\} = 1/2$。因为样本空间为$[1, 20]$，其中有一半是奇数。

---

如果在同一个样本空间定义多个随机变量，比如$X, Y$是随机变量，则函数$f(x, y) = Pr\{X = x \land \ Y = y\}$是$X,Y$的联合密度分布函数。

对于定值$y$：
$$
Pr\{Y = y\} = \sum_xPr\{X = x \land Y = y\}
$$
$x$同理：
$$
Pr\{X = x\} = \sum_yPr\{X = x \land Y = y\}
$$

应用条件概率公式，可得：
$$
Pr\{X = x | Y = y\} = \frac{Pr\{X = x \land Y = y\}}{Pr\{Y = y \}}
$$

## 期望

期望指的是其分布内所有取值的平均数。即：
$$
E[X] = \sum_{x}x\cdot Pr\{X = x\}
$$
假设投掷两枚硬币，有一枚正面朝上则获得3\$，否则失去2\$，设$X$为投掷硬币的收入，则期望为：
$$
E[X] = 6\cdot Pr\{2H\} + 1\cdot Pr\{HT\} -4\cdot Pr\{TT\} = 1
$$

期望是满足线性性质的，即：
$$
E[aX + bY] = aE[X] + bE[Y]
$$
若$n$个随机变量相互独立，那么可得：
$$
E[X_1X_2\cdots X_n] = E[X_1]E[X_2]\cdots E[X_n]
$$

## 方差和标准差

方差表达了一个随机变量可能离均值有多远，它体现了数据的离散程度。方差的公式为：
$$
\begin{align}
Var[X] &= E[(X-E[X])^2] \\
&= E[X^2] - 2E[XE[X]] + E[X]^2 \\
&= E[X^2] - E[X]^2
\end{align}
$$
方差满足性质：
$$
Var[aX] = a^2Var[X]
$$
当$X,Y$是独立随机变量时：
$$
Var[X+Y] = Var[X] + Var[Y]
$$
---

对于上面投掷硬币的例子，其收入的方差为：
$$
\begin{align}
Var[X] &= E[X^2] - E[X]^2 \\
&= 6^2/4 + 1^2/2 + (-4)^2/4 - 1^2 \\
&= 12.5
\end{align}
$$
其中$E[X^2]$等于变量的平方乘以概率密度函数。即：
$$
E[X^2] = \sum_{x}x^2Pr\{X=x\}
$$

> [!hint] 标准差
> 标准差是方差的非负平方根，记为$\sigma$。所以方差也可以写作$\sigma^2$。

# 几何分布和二项分布

伯努利试验有两种可能的结果，成功，其概率为$p$；失败，其概率为$q = 1-p$。当讨论多个伯努利试验时，约定这些试验是相互独立的。从伯努利试验可以得到两个重要的分布。

## 几何分布

定义随机变量$X$为获得一次成功所需要的伯努利试验次数，$X \in {1,2,\cdots}$。假设第$k$次成功，那么前$k-1$次一定是失败的，所以：
$$
Pr\{X=k\} = q^{k-1}p
$$
满足这个概率分布函数的称为*几何分布*。

几何分布的期望为：
$$
E[X] = \sum_{k=0}^{\infty}kq^{k-1}p = \frac{1}{p}
$$
方差为：
$$
Var[X] = \frac{q}{p^2}
$$

## 二项分布

定义随机变量$X$为$n$次伯努利试验中成功的次数，$X \in {1, 2, \cdots, n}$。假设有$k$次成功，那么共有$\begin{pmatrix}n \\ k\end{pmatrix}$种情况，每种情况的概率都是$p^{k}q^{n-k}$，所以：
$$
\Pr\{X\} = \begin{pmatrix}n \\ k\end{pmatrix}p^{k}q^{n-k}
$$
满足这个概率分布函数的称为*二项分布*。记为$b(k;n,p)$

二项分布的期望为：
$$
E[X] = \sum_{i=1}^nE[X_i] = np
$$

二项分布的方差为：
$$
Var[X] = npq 
$$

[^1]: 先验知识是指在观察数据之前，我们得到的某个知识或数据。
[^1]: 后验概率是指在观察数据之后，我们根据结果去求某个可能导致这个结果发生事件的概率。

