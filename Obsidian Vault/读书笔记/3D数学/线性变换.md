---
tags:
  - reference
---
> [!summary] 定义
> 线性变换是指原点不变，变换后保持直线不变，平行线依然平行的变换。体积，长度，角度，面积可能发生变化。

# 常见的线性变换

## 旋转

### 2D旋转

因为是线性变换，所以一定是对于原点的旋转。

![[2d_rotation.png]]

根据上课可以推导出变换矩阵：
$$
\textbf{R}(\theta) = 
\left[\begin{matrix}-\textbf{p}^{\prime}- \\
-\textbf{q}^{\prime}-
\end{matrix}\right]
= \left[\begin{matrix}\cos\theta &\sin\theta\\
-\sin\theta & \cos\theta
\end{matrix}\right] 
$$
### 3D绕坐标轴旋转

3D绕坐标轴实际上是对2D旋转的推广，被围绕的轴坐标分量不会保持不变，其他两轴构成了一个平面，此时情况退化到了2D的情况。

---
$$
\textbf{R}_x(\theta) = 
\left[\begin{matrix}
-\textbf{p}^{\prime}- \\
-\textbf{q}^{\prime}- \\
-\textbf{r}^{\prime}- \\
\end{matrix}\right]
= 
\left[\begin{matrix}
1 &0 & 0 \\
0 &\cos\theta &\sin\theta\\
0 &-\sin\theta &\cos\theta
\end{matrix}\right] 
$$
![[rotate_about_x_1.png]]

---
$$
\textbf{R}_y(\theta) = 
\left[\begin{matrix}
-\textbf{p}^{\prime}- \\
-\textbf{q}^{\prime}- \\
-\textbf{r}^{\prime}- \\
\end{matrix}\right]
= 
\left[\begin{matrix}
\cos\theta &0 &-\sin\theta\\
0 &1 & 0 \\
\sin\theta &0 &\cos\theta \\
\end{matrix}\right] 
$$
![[rotate_about_y_1.png]]

---
$$
\textbf{R}_z(\theta) = 
\left[\begin{matrix}
-\textbf{p}^{\prime}- \\
-\textbf{q}^{\prime}- \\
-\textbf{r}^{\prime}- \\
\end{matrix}\right]
= 
\left[\begin{matrix}
\cos\theta &\sin\theta &0\\
-\sin\theta &\cos\theta  &0\\
0 &0 & 1 \\
\end{matrix}\right] 
$$
![[rotate_about_z_1.png]]
### 3D绕任意轴旋转

设围绕一个通关原点的轴$\hat{\textbf{n}}$，旋转矩阵用$\textbf{R}(\hat{\textbf{n}}, \theta)$来表示，那么$\textbf{v}$旋转后的向量$\textbf{v}^{\prime}$为：
$$
\textbf{v}^{\prime} = \textbf{v}\textbf{R}(\hat{\textbf{n}}, \theta)
$$
![[rotate_about_arbitrary_axis_derive_matrix.png]]

根据上图，可以进行如下推导：
$$
\begin{align}
\textbf{v}^{\prime} &= \textbf{v}_{\parallel} + \textbf{v}^{\prime}_{\perp} \\
\textbf{v}_{\parallel} &= \textbf{v} \cdot \hat{\textbf{n}} \\
\textbf{v}_{\perp}^{\prime} &= 
[\begin{matrix}1 & 0\end{matrix}]
\left[\begin{matrix}
\cos\theta &\sin\theta\\
-\sin\theta & \cos\theta
\end{matrix}\right]
\left[\begin{matrix}
-\textbf{v}_{\perp}- \\
-\textbf{w}- \\
\end{matrix}\right]
= \textbf{v}_{\perp}\cos\theta + \textbf{w}\sin\theta \\
\textbf{v}_{\perp} &= \textbf{v} - \textbf{v}_{\parallel} \\
\textbf{w} &= \hat{\textbf{n}} \times \textbf{v} \\
\end{align}
$$
综合上述等式可得：
$$
\textbf{v}^{\prime} =
\cos\theta(\textbf{v} - (\textbf{v}\cdot\hat{\textbf{n}})\hat{\textbf{n}})
+\sin\theta(\hat{\textbf{n}} \times \textbf{v})
+(\textbf{v}\cdot\hat{\textbf{n}})\hat{\textbf{n}}
$$

将三个坐标轴$[\begin{array}{} 1 &0 &0\end{array}]$，$[\begin{array}{} 0 &1 &0\end{array}]$，$[\begin{array}{} 0 &0 &1\end{array}]$带入$\textbf{v}$并将三个$\textbf{v}^{\prime}$组成变换矩阵：

$$
\textbf{R}(\hat{\textbf{n}}, \theta) = 
\left[\begin{matrix}
n_x^2(1-\cos\theta) + \cos\theta &n_xn_y(1-\cos\theta) + n_z\sin\theta &n_xn_z(1-\cos\theta)-n_y\sin\theta \\
n_xn_y(1-\cos\theta) - n_z\sin\theta &n_y^2(1-\cos\theta) + \cos\theta &n_yn_z(1-\cos\theta)+n_x\sin\theta \\
n_xn_z(1-\cos\theta) + n_y\sin\theta &n_yn_z(1-\cos\theta) - n_x\sin\theta &n_z^2(1-\cos\theta)+\cos\theta \\
\end{matrix}\right]
$$

## 缩放

### 轴缩放

由于轴之间是线性无关的，所以每个轴都是各自变化，互不影响的，而缩放后的坐标轴只需要乘以缩放系数就可以得到，变换矩阵为：
$$
\textbf{S}(k_x,k_y,k_z) = 
\left[
\begin{matrix}
k_x &0 &0 \\
0 &k_y &0 \\
0 &0 &k_z
\end{matrix}
\right]
$$

### 按任意向量缩放

按照类似于旋转的方式进行推到，首先假设坐标空间按照$\hat{\textbf{n}}$的方向进行$\textbf{k}倍$缩放。

![[arbitrary_scale_vectors.png]]

根据上图可以进行如下推导：

$$
\begin{align}
\textbf{v}^{\prime} &= \textbf{v}_{\parallel}^{\prime} + \textbf{v}_{\perp} \\
\textbf{v}_{\parallel}^{\prime} &= k\textbf{v}_{\parallel} \\
\textbf{v}_{\parallel} &= \textbf{v} \cdot \hat{\textbf{n}} \\
\textbf{v}_{\perp} &= \textbf{v} - \textbf{v}_{\parallel}
\end{align}
$$
综合上述等式可得：
$$
\textbf{v}^{\prime} =
\textbf{v} +
(k-1)(\textbf{v}\cdot\hat{\textbf{n}})\hat{\textbf{n}}
$$

将三个坐标轴$[\begin{array}{} 1 &0 &0\end{array}]$，$[\begin{array}{} 0 &1 &0\end{array}]$，$[\begin{array}{} 0 &0 &1\end{array}]$带入$\textbf{v}$并将三个$\textbf{v}^{\prime}$组成变换矩阵：
$$
\textbf{S}(\hat{\textbf{n}}, k) = 
\left[\begin{matrix}
1 + (k-1)n_x^2 &(k-1)n_xn_y &(k-1)n_xn_z \\
(k-1)n_xn_y &1+(k-1)n_y^2 &(k-1)n_yn_z \\
(k-1)n_xn_z &(k-1)n_yn_z &1+(k-1)n_z^2 \\
\end{matrix}\right]
$$

## 正交投影

正交投影可以理解为缩放系数为$0$的缩放，所以带入缩放的公式可以直接得出投影矩阵。