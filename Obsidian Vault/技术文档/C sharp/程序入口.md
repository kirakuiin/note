---
tags:
  - reference
  - csharp
---
程序入口就是程序开始执行的地方（库和服务不做此要求）。
# Main方法

> [!hint]
> C# 9 之前只能使用此方法作为程序入口

一个典型的`Main`方法如下所示：

> [!example]
> ```csharp
> class TestClass
> {
> 	static void Main(string[] args)
> 	{
> 		Console.WriteLine(args.Length);
> 	}
> }
> ```

一个程序里只能有一个`Main`方法，如果多个类包含`Main`方法，则必须通过 **StartupObject** 编译器选项编译程序，以指定程序入口点。下面说明有关`Main`方法的注意事项：

- 必须位于类或结构中声明。必须是 **static** , 但不需要时 **public**。
- `Main`的返回类型是 `int`, `void`, `Task`, `Task<int>`。当且仅当返回为`Task`和`Task<int>`时，可以使用 **async** 进行修饰。
- *args* 参数不是必须的，也可以通过 **GetCommandLineArgs()** 来获取命令行参数。注意 *args* 的第一个参数不是程序的名称。
# 顶级语句

> [!hint]
> C# 9 之后可以使用顶级代码

一个典型的顶级语句如下所示：

> [!example]
> Console.WriteLine("Hello world!");
> return 0;

以下是注意事项：

 - 只有一个文件可以包含顶级语句，多个存在会出现编译错误。
 - 可以存在`Main`方法，但不会生效。
 - **using** 指令必须在顶级语句前面。
 - 语句位于全局命名空间内。
 - 具有顶级语句的文件也可以包含其他类型的定义，但必须位于顶级语句之后。
 - *args* 是默认提供的参数，必定不为null。
 - 可以使用 **await** 来调用异步方法，使用 **return** 语句返回退出代码。