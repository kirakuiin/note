---
tags:
  - godot
  - reference
---
记录下正交投影的2.5d的tilemaplayer的设置思路，这个由于本是上使用2d来表达部分3d的概念，因此比普通的2d要稍微复杂一些。下面所有问题在3d场景下都不是问题，所以如果美术资源允许，用3d的正交投影固定视角渲染会更简单。

# 绘制

![[2.5D tilemaplayer的设置 2025-09-03 16.01.58.excalidraw]]

假设有一个小山坡，你的角色（简称你）在山丘附近，我们分情况讨论：

1. 如果你在平地的话：
	- 如果你位于山丘的后面，那你就要被山丘挡住，如果位于山丘前面，那你就要挡住山丘
2. 如果你在山丘上：
	- 无论如何你都会挡住山丘

为了实现这样的效果，你所有的需要参与这种绘制次序可能变化的节点，都需要Enable Y sort。这样的话可以实现情况1的功能；对于情况2，这时候需要将你的z index设置为比山丘高，这样无论如何你都会位于山丘上面。

> [!hint]
> 这里需要注意一下各个tileset里面y原点的设置。设置时想象山丘在地面的投影，以这个投影的底部中心作为y原点。

# 碰撞体

![[2.5D tilemaplayer的设置 2025-09-03 16.17.43.excalidraw]]

对于山丘类型的单个tile（即有高度的tile），它实际上是有两套碰撞体的，下面一套，上面一套。所以你的tileset至少需要两个物理层，然后单独绘制它们的碰撞体。

当你位于平面时，检测山丘的平面碰撞体，当你位于其上时，你需要切换你的碰撞mask，从而和上面的碰撞体进行碰撞检测。

# 导航

